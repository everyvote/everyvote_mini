{% extends "base.html" %}

{% block title %}{{ office.constituency }} {{ office.name }} at {{ office.constituency.university }}{% endblock %}

{% block extrahead %}
<meta property="og:url" content="http://www.everyvote.org/offices/{{ office.id }}" />
{% endblock %}


{% block box1 %}
<div class="infobox">
  <div class="infobox-inside">
    <div class="infobox-name">
      <a href="/universities/{{ office.constituency.parent_constituency.id }}">{{ office.constituency.parent_constituency.name }}</a><br />
    </div>
    <button class="btn btn-info infobox-button-right" data-toggle="modal" href="#shareofficeModal">Share</button>
    {% if user in office.constituency.parent_constituency.administrators.all %}
      <a href="/organizations/add/"><button class="btn btn-success infobox-button-right"><span class="glyphicon glyphicon-plus"></span> Organization</button></a>
      <a href="/universities/update/{{office.constituency.parent_constituency.id}}"><button class="btn btn-warning infobox-button-right"><span class="glyphicon glyphicon-pencil"></span> Edit </button></a>
    {% endif %}
    <div class="infobox-name">
      <a href="/organizations/{{ office.constituency.id }}">{{ office.constituency.name }}</a><br />
    </div>
    {% if user in office.constituency.moderators.all %}
      <a href="/elections/add/"><button class="btn btn-success infobox-button-right"><span class="glyphicon glyphicon-plus"></span> Election</button></a>
      <a href="/offices/add/"><button class="btn btn-success infobox-button-right"><span class="glyphicon glyphicon-plus"></span> Office</button></a>
      <a href="/organizations/update/{{office.constituency.id}}"><button class="btn btn-warning infobox-button-right"><span class="glyphicon glyphicon-pencil"></span> Edit</button></a>
    {% endif %}
    <div class="infobox-name">
      {{ office.name }}
    </div>
    {% if user in office.constituency.moderators.all %}
      <a href="/offices/update/{{ office.id }}"><button class="btn btn-warning infobox-button-right"><span class="glyphicon glyphicon-pencil"></span> Edit</button></a>
    {% endif %}    
    
    <hr style="clear:both; padding:5px 0 0 0;">
    
    <div class="infobox-about">
      <p><strong>About {{ office.name }}: </strong><br />
      <p>{{ office.about|linebreaks|urlize }}</p>
      <p><strong>Elections: </strong><br />
      <p>
        {% for election in office.election_set.all %}
        <a href="/elections/{{ election.id }}">{{ election.name }}</a><br />
        {% endfor %}
      </p>
    </div>
  </div>
</div>

<div class="modal fade" id="shareofficeModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3 class="modal-title">Share this Office</h3>
      </div>
      <div class="modal-body">
        <strong>Copy the link below to share this office page:</strong>
        <br />
        <br />
        <p>www.everyvote.org/offices/{{office.id}}</p>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
{% endblock %}
